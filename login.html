<!DOCTYPE html>
<html lang="en">
  <head>
  	<title>Camagru</title>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="the photo gallery project">
    <meta name="keywords" content="photo, photobooth, selfie, likes">
    <meta name="author" content="vdoroshy">
    <link rel="stylesheet" type="text/css" href="./css/reset.css">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Cinzel" rel="stylesheet">
  </head>
  <body>
  	<header>
	  	<div id="logo">
	  	  <h1>Camagru</h1>
	  	</div>
	  	<nav>
	  	  <ul>
	  	    <li class="current"><a href="#">Login</a></li>
	  	    <li><a href="#">Photobooth</a></li>
	  	    <li><a href="#">Gallery</a></li>
	  	  </ul>
	  	</nav>
  	</header>

  	<section>
	    <form novalidate>
        <div>
          <span id="signUp">sign up</span>
        </div>
	      <div id="loginDiv">
	        <input class="field" name="login" type="text" placeholder="login">
          <span class="error" aria-live="polite"></span>
	      </div>
	      <div id="emailDiv">
	        <input class="field" name="email" type="email" placeholder="email">
          <span class="error" aria-live="polite"></span>
	      </div>
	      <div id="passwordDiv">
	        <input class="field" name="password" type="password" placeholder="password">
          <span class="error" aria-live="polite"></span>
	      </div>
	      <div id="repeatPasswordDiv">
	        <input class="field" name="repeatPassword" type="password" placeholder="repeat password">
          <span class="error" aria-live="polite"></span>
	      </div>
	      <div>
	      	<button class="btn_1" type="submit">submit</button>
	      </div>
        <div>
	        <span id="haveAccount">Already have an account?</span>
        </div>
        <div>
          <a id="signIn" href="#">sign in</a>
        </div>

	    </form>
  	</section>

  	<footer>
  	  <p>Copyright &copy; 2017 vdoroshy</p>
  	</footer>
    <script>
      /*getting the form*/
      var form = document.querySelector('form');
      /*getting login variables*/
      var login = document.querySelector('#loginDiv');
      var loginError = login.querySelector('.error');
      var loginField = login.querySelector('input');
      /*getting email variables*/
      var email = document.querySelector('#emailDiv');
      var emailError = email.querySelector('.error');
      var emailField = email.querySelector('input');
      /*getting password variables*/
      var password = document.querySelector('#passwordDiv');
      var passwordError = password.querySelector('.error');
      var passwordField = password.querySelector('input');
      /*getting repeatPassword variables*/
      var repeatPassword = document.querySelector('#repeatPasswordDiv');
      var repeatPasswordError = repeatPassword.querySelector('.error');
      var repeatPasswordField = repeatPassword.querySelector('input');

      form.addEventListener("submit", function(event) {

        checkLogin(loginField, loginError);
        checkEmail(emailField, emailError);
        checkPassword(passwordField, passwordError);
        checkRepeatPassword(repeatPasswordField, repeatPasswordError, passwordField);

      }, false);

      function checkLogin(login, error) {
        var reg = /^[a-zA-Z0-9_]+$/;

        /*
        **if there is nothing entered or the username is of not sufficient length
        */
        if (login.value == "" || (login.value.length < 4 || login.value.length > 8)) {
          error.textContent = "enter a username (4-8 characters)";
          error.classList.add("active-error");
          login.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **if the username contains not only letters, digits, and underscore
        */
        if (!reg.test(login.value)) {
          error.textContent = "special characters are not allowed";
          error.classList.add("active-error");
          login.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **removing the error classes in case everything is alright
        */
        popError(error, login);
      }

      function checkEmail(email, error) {
        /*regex to validate an email
        *
        *1)any number of blocks separated with dot before @ is possible
        *2)only letters, numbers, and underscore are allowed before @
        *3)only letters and hyphens are allowed for domain
        *4)complicated extensions are allowed (com.ua or org.su)
        */
        var reg = /^[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*@[a-zA-Z-]+\.([a-zA-Z]+){2,}(\.([a-zA-Z]+){2,})*$/;

        /*
        **if there is nothing entered or the email is of not correct format
        */
        if (email.value == "" || !reg.test(email.value)) {
          error.textContent = "enter a valid email address";
          error.classList.add("active-error");
          email.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **removing the error classes in case everything is alright
        */
        popError(error, email);
      }

      function checkPassword(password, error) {
        /*regex to validate an password
        *
        *1)the password should consist only of letters, digits, and underscore
        *2)the password should be from 8 to 32 characters long
        *3)the password should contain at least 1 lowercase letter
        *4)the password should contain at least 1 uppercase letter
        *5)the password should contain at least 1 digit
        */
        var reg = /^(?=[a-zA-Z0-9_]{8,32}$)(?=[^a-z]*[a-z])(?=[^A-Z]*[A-Z])(?=\D*\d)/;

        /*
        **if there is nothing entered
        */
        if (password.value == "") {
          error.textContent = "enter a password";
          error.classList.add("active-error");
          password.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **if the password does not contain at least one: lowercase letter, uppercase letter, and 1 digit
        **or is of insufficient length
        */
        if (!reg.test(password.value)) {
          error.textContent = "no special characters at least 1 uppercase letter at least 1 lowercase letter at least 1 digit 8-32 characters";
          error.classList.add("active-error");
          password.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **removing the error classes in case everything is alright
        */
        popError(error, password);
      }

      function checkRepeatPassword(repeatPassword, error, password) {
        /*if both the password and repeated password are not entered*/
        if (repeatPassword.value == "" && password.value == "") {
          error.textContent = "re-enter your password";
          error.classList.add("active-error");
          repeatPassword.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **if the password is not entered, and the repeated password is entered
        */
        if (repeatPassword.value != "" && password.value == "") {
          error.textContent = "you have to enter a password first";
          error.classList.add("active-error");
          repeatPassword.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **if the password does not match the repeated one
        */
        if (repeatPassword.value != password.value) {
          error.textContent = "passwords do not match";
          error.classList.add("active-error");
          repeatPassword.classList.add("invalid-field");

          event.preventDefault();
          return;
        }
        /*
        **removing the error classes in case everything is alright
        */
        popError(error, repeatPassword);
      }

      // function addError(error, field, text, event) {
      //   error.textContent = text;
      //   error.classList.add("active-error");
      //   field.classList.add("invalid-field");

      //   event.preventDefault();
      //   return;
      // }

      function popError(error, field) {
        error.textContent = "";
        error.classList.remove("active-error");
        field.classList.remove("invalid-field");
      }

// new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})");
// new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})");
    </script>
  </body>
</html>